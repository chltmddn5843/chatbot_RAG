# 📱 통신사 요금제 RAG 데이터 전처리 및 임베딩 시스템

이 프로젝트는 SKT, KT, LGU+의 요금제 정보가 담긴 `.docx` 문서를 파싱하여 **Markdown 계층 구조**로 변환하고, 최신 임베딩 모델을 사용하여 벡터 데이터베이스(Milvus/Attu 등)에 최적화된 형태(`CSV`, `JSON`, `JSONL`)로 추출하는 시스템입니다.

## 🛠 주요 기능

**통신사별 맞춤 파싱**: 각 통신사 문서의 특성에 맞춰 `[통신사명]`, `요금제란?`, `[요금제 시작]` 등의 키워드를 기준으로 섹션을 자동 분리합니다.


**Markdown 계층화**: 일반 텍스트를 `# (H1)`, `## (H2)`, `### (H3)` 구조로 변환하여 LLM이 데이터의 구조를 더 잘 이해할 수 있도록 전처리합니다.


* **다양한 청킹 전략 지원**:
* **유닛별 분리**: 개별 요금제 단위로 저장.
**균등 청킹**: 전체 글자 수를 계산하여 설정한 청크 개수(예: 7개)에 맞춰 균등 배분.


**대용량 청킹**: 최대 글자 수(예: 1,000자)에 맞춰 문맥을 유지하며 병합.

 
**고성능 임베딩**: `nomic-embed-text-v2-moe` 모델을 사용하여 텍스트의 의미를 벡터(Dense Vector)로 변환합니다.



## ⚙️ 데이터 전처리 설정 (RAG Config)

현재 시스템에 적용된 벡터 검색 및 청킹 설정값입니다:

| 항목 | 설정값 | 설명 |
| --- | --- | --- |
| **Chunk Size** | **800** | 텍스트를 자르는 기본 단위 (글자 수 기준) |
| **Overlap Size** | **400** | 청크 간 문맥 유지를 위해 겹치는 구간 (50%) |
| **Top K** | **20** | 질문과 유사한 상위 20개의 청크를 검색 |
| **Threshold** | **0.2** | 검색 결과의 최소 유사도 점수 |
| **Temperature** | **0.7** | 답변 생성 시의 창의성 정도 |

## 🚀 시작하기

### 1. 환경 설치

```bash
pip install pandas sentence_transformers python-docx torch

```

### 2. 소스 데이터 준비

* 
`요금제RAG/` 폴더 내에 통신사별 `.docx` 파일을 배치합니다.


* `SKT요금제정보_251209.docx`
* `KT요금제정보_251209.docx`
* `LGU+요금제정보_260102.docx`



### 3. 실행 프로세스

1. **Parsing**: `.docx` 문서에서 텍스트 추출 및 섹션 분리.
2. **Formatting**: 텍스트를 Markdown 형식으로 구조화.
3. **Embedding**: `nomic-ai` 모델로 벡터화 수행.
4. 
**Export**: 결과물을 `CSV`, `JSON`, `TXT(JSONL)` 형식으로 저장.



## 📂 파일 구조 및 출력

* 
**`SKT_simple_optimized.json`**: 최적화된 청킹이 적용된 최종 데이터셋.


* 
**`KT_plans_final_balanced.json`**: 7개 청크로 균등하게 나뉜 데이터.


* 
**`LGUplus_plans_final.csv`**: 메타데이터와 벡터값이 포함된 업로드용 파일.



---

**참고**: 임베딩 시 `nomic-ai/nomic-embed-text-v2-moe` 모델의 성능을 위해 GPU(CUDA) 환경을 권장합니다.

---

**다음 단계로 무엇을 도와드릴까요?**

* "README에 설치 방법(Installation) 섹션을 더 상세히 추가해줄까?"
* "작성된 JSON 파일을 Milvus 데이터베이스에 업로드하는 코드를 짜줄까?"
* "Overlap Size 400이 너무 클 때 발생할 수 있는 문제점을 알려줄까?"
